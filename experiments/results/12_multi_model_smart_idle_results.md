# Multi-Model Process Pool (2x MPS)

_2 model replicas in separate processes for true MPS parallelism_

**Timestamp:** 2025-12-26 02:24:51

**Model:** `cross-encoder/ms-marco-MiniLM-L-6-v2`

**Backend:** `mps` | **Device:** `mps`

## Results Summary

| Batch | Conc | Pairs | Time(s) | Lat Avg | Lat P95 | Lat P99 | TP Avg | TP P95 |
|-------|------|-------|---------|---------|---------|---------|--------|--------|
| 64 | 1 | 6400 | 10.02 | 100.2ms | 123.4ms | 129.6ms | 638.9 | 839.0 |

## Detailed Metrics

### Config 1: batch=64, concurrency=1

**Total:** 6400 pairs in 10.02s

#### Latency (ms)
| Metric | Value |
|--------|-------|
| Average | 100.15 |
| Min | 72.52 |
| Max | 138.58 |
| Std Dev | 16.47 |
| P50 | 104.40 |
| P90 | 119.59 |
| P95 | 123.38 |
| P99 | 129.59 |

#### Throughput (pairs/s)
| Metric | Value |
|--------|-------|
| Average | 638.86 |
| Min | 461.82 |
| Max | 882.46 |
| Std Dev | 112.43 |
| P50 | 613.02 |
| P90 | 822.81 |
| P95 | 838.96 |
| P99 | 864.70 |

#### Latency vs Throughput Analysis

| Latency Range | Avg Throughput | Min Throughput | Max Throughput | Count |
|---------------|----------------|----------------|----------------|-------|
| < 104.4ms (P50) | 752.01 | 613.47 | 882.46 | 50 |
| 104.4-113.0ms (P50-P75) | 592.70 | 567.26 | 612.56 | 25 |
| 113.0-119.6ms (P75-P90) | 548.75 | 535.22 | 564.44 | 15 |
| >= 119.6ms (P90+) | 508.46 | 461.82 | 534.68 | 10 |

**Correlation:** -0.990 (negative correlation expected: lower latency = higher throughput)

## Overall Summary

| Metric | Value | Config |
|--------|-------|--------|
| Best Throughput | 638.86 p/s | batch=64, conc=1 |
| Best Latency | 100.15ms | batch=64, conc=1 |
| Avg Throughput | 638.86 p/s | all configs |
| Avg Latency | 100.15ms | all configs |

## Dashboard Metrics Summary

| Metric | Avg | Min | Max | P50 | P95 |
|--------|-----|-----|-----|-----|-----|
| GPU Memory (MB) | 1371.1 | 1107.6 | 1487.6 | 1403.6 | 1487.6 |
| GPU Utilization (%) | 73.6 | 34.0 | 82.8 | 75.6 | 81.8 |
| CPU Usage (%) | 1.0 | 0.8 | 1.6 | 1.0 | 1.2 |
| Tokenization (ms) | 22.2 | 18.9 | 25.5 | 22.5 | 23.6 |
| Inference (ms) | 77.5 | 52.7 | 106.7 | 82.1 | 103.5 |
| Queue Wait (ms) | 0.0 | 0.0 | 0.0 | 0.0 | 0.0 |
| Padding Waste (%) | 44.9 | 38.1 | 57.7 | 44.9 | 53.3 |

## Dashboard Time-Series Data

| Index | GPU Mem (MB) | GPU Util (%) | CPU (%) | Latency (ms) | Throughput | Tokenize (ms) | Inference (ms) | Queue (ms) | Padding (%) |
|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|
| 0 | 1107.6 | 34.0 | 1.0 | 136.0 | 192 | 21.3 | 54.8 | 0.0 | 38.8 |
| 1 | 1149.6 | 65.9 | 1.1 | 104.5 | 512 | 20.8 | 83.6 | 0.0 | 38.9 |
| 2 | 1271.6 | 76.8 | 1.1 | 99.6 | 640 | 25.5 | 94.7 | 0.0 | 46.5 |
| 3 | 1253.6 | 82.8 | 1.0 | 105.8 | 640 | 20.8 | 83.3 | 0.0 | 42.5 |
| 4 | 1323.6 | 71.4 | 0.9 | 102.5 | 576 | 21.4 | 82.6 | 0.0 | 41.8 |
| 5 | 1323.6 | 77.6 | 1.0 | 100.8 | 640 | 22.4 | 82.6 | 0.0 | 38.7 |
| 6 | 1403.6 | 68.6 | 0.8 | 98.8 | 576 | 23.5 | 103.9 | 0.0 | 53.4 |
| 7 | 1409.6 | 78.4 | 1.1 | 101.4 | 640 | 23.0 | 89.6 | 0.0 | 45.1 |
| 8 | 1403.6 | 81.9 | 0.9 | 105.2 | 640 | 23.2 | 72.6 | 0.0 | 57.7 |
| 9 | 1487.6 | 75.1 | 1.0 | 106.6 | 576 | 23.3 | 93.5 | 0.0 | 50.7 |
| 10 | 1403.6 | 79.0 | 1.0 | 101.9 | 640 | 22.5 | 62.8 | 0.0 | 47.0 |
| 11 | 1403.6 | 74.9 | 0.9 | 106.4 | 576 | 21.0 | 106.7 | 0.0 | 38.1 |
| 12 | 1487.6 | 72.7 | 1.0 | 104.4 | 576 | 23.0 | 52.7 | 0.0 | 38.7 |
| 13 | 1403.6 | 77.3 | 1.0 | 100.4 | 640 | 22.5 | 95.3 | 0.0 | 50.1 |
| 14 | 1487.6 | 76.1 | 1.0 | 98.4 | 640 | 19.6 | 81.1 | 0.0 | 40.0 |
| 15 | 1403.6 | 74.5 | 1.1 | 96.2 | 640 | 18.9 | 81.6 | 0.0 | 45.3 |
| 16 | 1487.6 | 78.7 | 1.0 | 101.4 | 640 | 22.9 | 53.6 | 0.0 | 43.2 |
| 17 | 1487.6 | 80.1 | 1.2 | 96.1 | 704 | 22.1 | 61.0 | 0.0 | 45.7 |
| 18 | 1323.6 | 69.2 | 1.0 | 86.4 | 704 | 23.4 | 58.4 | 0.0 | 41.8 |
| 19 | 1323.6 | 72.8 | 1.1 | 89.3 | 704 | 23.6 | 89.2 | 0.0 | 47.8 |
| 20 | 1409.6 | 77.8 | 1.1 | 93.5 | 704 | 22.0 | 58.7 | 0.0 | 44.6 |
| 21 | 1409.6 | 73.8 | 1.6 | 90.1 | 704 | 22.6 | 63.1 | 0.0 | 51.7 |
