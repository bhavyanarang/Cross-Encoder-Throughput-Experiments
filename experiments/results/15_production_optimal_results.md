# 15_production_optimal

_Production config: batch=64, conc=2, dynamic batching (from Exp 08a)_

**Timestamp:** 2025-12-26 02:55:12

**Model:** `cross-encoder/ms-marco-MiniLM-L-6-v2`

**Backend:** `mps` | **Device:** `mps`

## Results Summary

| Batch | Conc | Pairs | Time(s) | Lat Avg | Lat P95 | Lat P99 | TP Avg | TP P95 |
|-------|------|-------|---------|---------|---------|---------|--------|--------|
| 96 | 1 | 48000 | 59.00 | 117.9ms | 141.0ms | 262.4ms | 813.6 | 880.2 |

## Detailed Metrics

### Config 1: batch=96, concurrency=1

**Total:** 48000 pairs in 59.00s

#### Latency (ms)
| Metric | Value |
|--------|-------|
| Average | 117.95 |
| Min | 106.78 |
| Max | 282.09 |
| Std Dev | 24.75 |
| P50 | 111.56 |
| P90 | 124.70 |
| P95 | 141.03 |
| P99 | 262.42 |

#### Throughput (pairs/s)
| Metric | Value |
|--------|-------|
| Average | 813.61 |
| Min | 340.31 |
| Max | 899.01 |
| Std Dev | 93.46 |
| P50 | 860.52 |
| P90 | 873.96 |
| P95 | 880.19 |
| P99 | 892.62 |

#### Latency vs Throughput Analysis

| Latency Range | Avg Throughput | Min Throughput | Max Throughput | Count |
|---------------|----------------|----------------|----------------|-------|
| < 111.6ms (P50) | 869.88 | 860.55 | 899.01 | 250 |
| 111.6-113.1ms (P50-P75) | 855.68 | 849.02 | 860.49 | 125 |
| 113.1-124.7ms (P75-P90) | 832.41 | 770.43 | 848.74 | 75 |
| >= 124.7ms (P90+) | 593.32 | 340.31 | 764.65 | 50 |

**Correlation:** -0.975 (negative correlation expected: lower latency = higher throughput)

## Overall Summary

| Metric | Value | Config |
|--------|-------|--------|
| Best Throughput | 813.61 p/s | batch=96, conc=1 |
| Best Latency | 117.95ms | batch=96, conc=1 |
| Avg Throughput | 813.61 p/s | all configs |
| Avg Latency | 117.95ms | all configs |

## Dashboard Metrics Summary

| Metric | Avg | Min | Max | P50 | P95 |
|--------|-----|-----|-----|-----|-----|
| GPU Memory (MB) | 1135.6 | 1135.6 | 1135.6 | 1135.6 | 1135.6 |
| GPU Utilization (%) | 67.2 | 34.3 | 75.5 | 69.4 | 72.7 |
| CPU Usage (%) | 1.2 | 0.9 | 1.9 | 1.2 | 1.4 |
| Tokenization (ms) | 34.6 | 29.4 | 126.1 | 32.2 | 38.8 |
| Inference (ms) | 79.6 | 74.6 | 110.3 | 77.3 | 99.6 |
| Queue Wait (ms) | 0.0 | 0.0 | 0.0 | 0.0 | 0.0 |
| Padding Waste (%) | 40.9 | 34.8 | 47.2 | 41.1 | 43.7 |

## Dashboard Time-Series Data

| Index | GPU Mem (MB) | GPU Util (%) | CPU (%) | Latency (ms) | Throughput | Tokenize (ms) | Inference (ms) | Queue (ms) | Padding (%) |
|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|
| 0 | 1135.6 | 34.3 | 0.9 | 173.8 | 288 | 110.6 | 93.9 | 0.0 | 42.3 |
| 1 | 1135.6 | 65.2 | 1.3 | 138.3 | 672 | 33.5 | 77.4 | 0.0 | 39.9 |
| 2 | 1135.6 | 69.6 | 1.3 | 110.9 | 864 | 31.6 | 77.2 | 0.0 | 42.7 |
| 3 | 1135.6 | 75.5 | 1.3 | 117.7 | 864 | 33.0 | 77.8 | 0.0 | 38.3 |
| 4 | 1135.6 | 67.7 | 1.2 | 119.0 | 768 | 31.5 | 77.3 | 0.0 | 41.2 |
| 5 | 1135.6 | 69.7 | 1.2 | 111.2 | 864 | 31.9 | 77.2 | 0.0 | 39.7 |
| 6 | 1135.6 | 72.2 | 1.0 | 113.5 | 864 | 32.1 | 77.8 | 0.0 | 43.0 |
| 7 | 1135.6 | 66.6 | 1.1 | 116.2 | 768 | 34.4 | 78.0 | 0.0 | 38.1 |
| 8 | 1135.6 | 71.8 | 1.2 | 112.8 | 864 | 31.6 | 76.9 | 0.0 | 39.4 |
| 9 | 1135.6 | 69.6 | 1.1 | 111.2 | 864 | 32.7 | 77.4 | 0.0 | 42.8 |
| 10 | 1135.6 | 64.4 | 1.1 | 114.9 | 768 | 30.7 | 76.9 | 0.0 | 42.5 |
| 11 | 1135.6 | 72.0 | 1.1 | 113.0 | 864 | 32.3 | 77.2 | 0.0 | 42.0 |
| 12 | 1135.6 | 72.5 | 1.0 | 112.6 | 864 | 32.7 | 77.5 | 0.0 | 41.6 |
| 13 | 1135.6 | 73.1 | 1.1 | 115.0 | 864 | 31.5 | 82.8 | 0.0 | 40.2 |
| 14 | 1135.6 | 63.1 | 0.9 | 115.6 | 768 | 93.9 | 99.5 | 0.0 | 40.5 |
| 15 | 1135.6 | 57.3 | 1.1 | 127.0 | 672 | 32.3 | 77.8 | 0.0 | 43.9 |
| 16 | 1135.6 | 74.2 | 1.2 | 122.9 | 864 | 32.1 | 77.5 | 0.0 | 39.3 |
| 17 | 1135.6 | 71.8 | 1.3 | 112.6 | 864 | 31.7 | 77.5 | 0.0 | 41.4 |
| 18 | 1135.6 | 69.5 | 1.3 | 109.8 | 864 | 31.1 | 77.2 | 0.0 | 42.7 |
| 19 | 1135.6 | 69.5 | 1.1 | 109.8 | 864 | 32.6 | 78.0 | 0.0 | 40.3 |
| 20 | 1135.6 | 57.8 | 1.1 | 130.6 | 672 | 51.8 | 104.0 | 0.0 | 41.5 |
| 21 | 1135.6 | 57.8 | 1.1 | 131.3 | 672 | 32.1 | 77.3 | 0.0 | 40.8 |
| 22 | 1135.6 | 70.9 | 1.2 | 115.8 | 864 | 32.4 | 77.2 | 0.0 | 42.6 |
| 23 | 1135.6 | 70.9 | 1.2 | 115.2 | 864 | 31.4 | 101.4 | 0.0 | 35.8 |
| 24 | 1135.6 | 64.2 | 1.0 | 113.0 | 768 | 31.9 | 77.2 | 0.0 | 42.3 |
| 25 | 1135.6 | 72.0 | 1.1 | 113.0 | 864 | 32.2 | 77.1 | 0.0 | 38.7 |
| 26 | 1135.6 | 69.2 | 1.0 | 110.2 | 864 | 31.8 | 77.3 | 0.0 | 41.1 |
| 27 | 1135.6 | 71.9 | 1.2 | 112.9 | 864 | 31.2 | 77.9 | 0.0 | 43.2 |
| 28 | 1135.6 | 72.4 | 1.1 | 113.2 | 768 | 31.6 | 103.0 | 0.0 | 34.8 |
| 29 | 1135.6 | 64.7 | 1.0 | 113.9 | 768 | 33.0 | 77.4 | 0.0 | 39.9 |
| 30 | 1135.6 | 72.2 | 1.2 | 113.4 | 864 | 31.0 | 77.0 | 0.0 | 43.5 |
| 31 | 1135.6 | 71.9 | 1.0 | 112.8 | 864 | 34.8 | 79.1 | 0.0 | 43.2 |
| 32 | 1135.6 | 64.4 | 1.1 | 113.9 | 768 | 32.5 | 77.1 | 0.0 | 41.1 |
| 33 | 1135.6 | 72.7 | 1.1 | 114.4 | 864 | 32.4 | 78.5 | 0.0 | 40.3 |
| 34 | 1135.6 | 75.3 | 1.2 | 117.0 | 864 | 29.4 | 103.2 | 0.0 | 43.8 |
| 35 | 1135.6 | 72.1 | 1.2 | 113.3 | 864 | 31.4 | 77.0 | 0.0 | 41.8 |
| 36 | 1135.6 | 69.4 | 1.1 | 109.9 | 864 | 29.9 | 77.2 | 0.0 | 47.2 |
| 37 | 1135.6 | 69.4 | 1.3 | 109.8 | 864 | 32.3 | 77.2 | 0.0 | 38.3 |
| 38 | 1135.6 | 69.2 | 1.2 | 110.2 | 864 | 31.6 | 75.6 | 0.0 | 40.7 |
| 39 | 1135.6 | 69.1 | 1.1 | 110.0 | 864 | 31.3 | 78.1 | 0.0 | 42.1 |
| 40 | 1135.6 | 69.1 | 1.2 | 109.8 | 864 | 31.4 | 77.2 | 0.0 | 42.1 |
| 41 | 1135.6 | 69.2 | 1.2 | 109.5 | 864 | 32.5 | 77.3 | 0.0 | 42.4 |
| 42 | 1135.6 | 64.6 | 1.0 | 128.6 | 768 | 31.0 | 77.5 | 0.0 | 41.5 |
| 43 | 1135.6 | 57.3 | 1.1 | 132.6 | 672 | 35.7 | 77.5 | 0.0 | 35.9 |
| 44 | 1135.6 | 69.6 | 1.3 | 110.6 | 864 | 31.2 | 77.2 | 0.0 | 43.9 |
| 45 | 1135.6 | 69.3 | 1.2 | 110.4 | 864 | 32.1 | 77.1 | 0.0 | 40.3 |
| 46 | 1135.6 | 69.5 | 1.3 | 110.2 | 864 | 30.8 | 77.3 | 0.0 | 42.8 |
| 47 | 1135.6 | 69.5 | 1.2 | 110.1 | 864 | 32.1 | 77.2 | 0.0 | 42.0 |
| 48 | 1135.6 | 69.6 | 1.1 | 110.2 | 864 | 31.7 | 77.2 | 0.0 | 42.5 |
| 49 | 1135.6 | 69.2 | 1.1 | 109.7 | 864 | 32.9 | 75.3 | 0.0 | 39.7 |
| 50 | 1135.6 | 69.3 | 1.2 | 110.2 | 864 | 32.4 | 77.5 | 0.0 | 39.5 |
| 51 | 1135.6 | 69.7 | 1.2 | 111.0 | 864 | 31.4 | 77.7 | 0.0 | 42.0 |
| 52 | 1135.6 | 69.5 | 1.2 | 110.1 | 864 | 32.2 | 77.2 | 0.0 | 39.6 |
| 53 | 1135.6 | 69.3 | 1.2 | 109.5 | 864 | 31.6 | 77.2 | 0.0 | 40.8 |
| 54 | 1135.6 | 69.3 | 1.2 | 109.9 | 864 | 33.0 | 77.5 | 0.0 | 37.8 |
| 55 | 1135.6 | 69.5 | 1.2 | 110.6 | 864 | 31.5 | 77.0 | 0.0 | 40.3 |
| 56 | 1135.6 | 69.3 | 1.2 | 110.4 | 864 | 33.0 | 77.6 | 0.0 | 40.7 |
| 57 | 1135.6 | 69.2 | 1.2 | 110.0 | 864 | 33.1 | 94.5 | 0.0 | 38.6 |
| 58 | 1135.6 | 63.4 | 1.1 | 112.5 | 768 | 32.1 | 77.0 | 0.0 | 39.6 |
| 59 | 1135.6 | 71.2 | 1.1 | 113.0 | 864 | 38.6 | 78.1 | 0.0 | 41.7 |
| 60 | 1135.6 | 69.7 | 1.3 | 111.3 | 864 | 32.5 | 77.3 | 0.0 | 40.6 |
| 61 | 1135.6 | 69.8 | 1.2 | 111.1 | 864 | 32.0 | 77.3 | 0.0 | 40.8 |
| 62 | 1135.6 | 69.4 | 1.1 | 110.9 | 864 | 30.1 | 76.9 | 0.0 | 43.1 |
| 63 | 1135.6 | 69.1 | 1.2 | 109.2 | 864 | 31.1 | 77.2 | 0.0 | 42.0 |
| 64 | 1135.6 | 69.3 | 1.2 | 109.4 | 864 | 33.0 | 78.0 | 0.0 | 38.5 |
| 65 | 1135.6 | 69.7 | 1.3 | 111.6 | 864 | 31.5 | 77.5 | 0.0 | 39.9 |
| 66 | 1135.6 | 69.7 | 1.3 | 111.5 | 864 | 31.5 | 77.3 | 0.0 | 41.1 |
| 67 | 1135.6 | 69.5 | 1.1 | 111.3 | 864 | 32.4 | 77.2 | 0.0 | 41.2 |
| 68 | 1135.6 | 69.6 | 1.0 | 111.1 | 864 | 31.6 | 76.9 | 0.0 | 39.5 |
| 69 | 1135.6 | 64.4 | 1.2 | 113.2 | 768 | 30.4 | 77.0 | 0.0 | 42.9 |
| 70 | 1135.6 | 72.0 | 1.2 | 113.0 | 864 | 32.6 | 77.2 | 0.0 | 37.5 |
| 71 | 1135.6 | 69.4 | 1.1 | 110.5 | 864 | 32.2 | 77.1 | 0.0 | 41.5 |
| 72 | 1135.6 | 69.5 | 1.2 | 110.3 | 864 | 30.5 | 76.9 | 0.0 | 42.2 |
| 73 | 1135.6 | 69.5 | 1.3 | 110.3 | 864 | 32.0 | 77.1 | 0.0 | 43.4 |
| 74 | 1135.6 | 69.6 | 1.3 | 111.0 | 864 | 31.5 | 77.5 | 0.0 | 42.6 |
| 75 | 1135.6 | 69.4 | 1.3 | 111.0 | 864 | 32.5 | 77.3 | 0.0 | 39.4 |
| 76 | 1135.6 | 69.4 | 1.3 | 111.5 | 864 | 35.0 | 77.5 | 0.0 | 40.7 |
| 77 | 1135.6 | 61.8 | 1.1 | 111.3 | 768 | 33.3 | 77.6 | 0.0 | 41.2 |
| 78 | 1135.6 | 57.7 | 1.2 | 128.6 | 672 | 31.7 | 77.6 | 0.0 | 44.0 |
| 79 | 1135.6 | 73.1 | 1.1 | 124.6 | 864 | 32.7 | 77.2 | 0.0 | 41.1 |
| 80 | 1135.6 | 69.5 | 1.2 | 110.7 | 864 | 33.1 | 77.1 | 0.0 | 36.2 |
| 81 | 1135.6 | 69.5 | 1.2 | 111.0 | 864 | 32.1 | 77.2 | 0.0 | 41.3 |
| 82 | 1135.6 | 69.6 | 1.3 | 111.1 | 864 | 31.6 | 77.2 | 0.0 | 43.6 |
| 83 | 1135.6 | 69.4 | 1.2 | 110.5 | 864 | 31.6 | 77.1 | 0.0 | 42.7 |
| 84 | 1135.6 | 69.3 | 1.2 | 110.1 | 864 | 31.5 | 77.0 | 0.0 | 40.6 |
| 85 | 1135.6 | 69.3 | 1.2 | 110.1 | 864 | 32.3 | 77.1 | 0.0 | 38.0 |
| 86 | 1135.6 | 62.2 | 1.3 | 112.8 | 768 | 34.0 | 83.2 | 0.0 | 35.9 |
| 87 | 1135.6 | 65.5 | 1.1 | 123.5 | 768 | 32.5 | 77.2 | 0.0 | 42.9 |
| 88 | 1135.6 | 72.6 | 1.3 | 119.4 | 864 | 31.8 | 77.3 | 0.0 | 41.2 |
| 89 | 1135.6 | 69.3 | 1.2 | 109.7 | 864 | 31.1 | 77.1 | 0.0 | 42.2 |
| 90 | 1135.6 | 69.4 | 1.1 | 110.0 | 864 | 30.8 | 77.2 | 0.0 | 43.7 |
| 91 | 1135.6 | 64.7 | 1.2 | 113.8 | 768 | 33.4 | 77.3 | 0.0 | 39.4 |
| 92 | 1135.6 | 71.8 | 1.1 | 112.6 | 864 | 31.2 | 74.6 | 0.0 | 38.5 |
| 93 | 1135.6 | 70.8 | 1.3 | 111.3 | 864 | 34.3 | 78.5 | 0.0 | 41.6 |
| 94 | 1135.6 | 71.6 | 1.3 | 112.9 | 864 | 38.0 | 79.8 | 0.0 | 40.1 |
| 95 | 1135.6 | 70.3 | 1.2 | 112.7 | 864 | 32.3 | 76.0 | 0.0 | 38.3 |
| 96 | 1135.6 | 61.9 | 1.2 | 111.8 | 768 | 31.1 | 77.0 | 0.0 | 41.4 |
| 97 | 1135.6 | 69.4 | 1.1 | 110.2 | 864 | 32.5 | 77.3 | 0.0 | 40.1 |
| 98 | 1135.6 | 69.8 | 1.3 | 110.6 | 864 | 32.0 | 77.1 | 0.0 | 40.8 |
| 99 | 1135.6 | 69.3 | 1.2 | 110.1 | 864 | 32.9 | 77.1 | 0.0 | 36.2 |
| 100 | 1135.6 | 69.1 | 1.2 | 110.2 | 864 | 31.0 | 75.8 | 0.0 | 41.4 |
| 101 | 1135.6 | 68.0 | 0.9 | 135.0 | 672 | 52.5 | 93.0 | 0.0 | 38.3 |
| 102 | 1135.6 | 62.1 | 1.0 | 145.7 | 576 | 33.0 | 77.8 | 0.0 | 43.4 |
| 103 | 1135.6 | 53.9 | 1.1 | 169.9 | 576 | 33.4 | 82.1 | 0.0 | 38.5 |
| 104 | 1135.6 | 56.3 | 1.6 | 182.2 | 576 | 33.3 | 83.5 | 0.0 | 37.0 |
| 105 | 1135.6 | 45.8 | 1.1 | 149.0 | 480 | 41.4 | 79.8 | 0.0 | 40.5 |
| 106 | 1135.6 | 61.2 | 1.3 | 139.6 | 672 | 32.4 | 77.2 | 0.0 | 39.8 |
| 107 | 1135.6 | 73.5 | 1.1 | 124.5 | 864 | 32.2 | 77.6 | 0.0 | 42.2 |
| 108 | 1135.6 | 69.4 | 1.3 | 110.5 | 864 | 32.2 | 76.9 | 0.0 | 39.8 |
| 109 | 1135.6 | 69.4 | 1.2 | 109.9 | 864 | 30.4 | 77.1 | 0.0 | 44.9 |
| 110 | 1135.6 | 69.4 | 1.2 | 109.6 | 864 | 32.2 | 77.1 | 0.0 | 39.1 |
| 111 | 1135.6 | 58.0 | 1.5 | 125.5 | 672 | 33.1 | 110.0 | 0.0 | 40.5 |
| 112 | 1135.6 | 51.9 | 1.3 | 184.6 | 480 | 31.8 | 77.6 | 0.0 | 43.4 |
| 113 | 1135.6 | 47.0 | 1.2 | 185.5 | 480 | 35.6 | 78.6 | 0.0 | 43.0 |
| 114 | 1135.6 | 45.2 | 1.6 | 170.4 | 480 | 126.1 | 110.3 | 0.0 | 43.1 |
| 115 | 1135.6 | 54.7 | 1.4 | 159.6 | 576 | 32.8 | 84.8 | 0.0 | 41.6 |
| 116 | 1135.6 | 61.3 | 1.6 | 152.2 | 672 | 31.3 | 78.5 | 0.0 | 40.2 |
| 117 | 1135.6 | 65.0 | 1.4 | 126.4 | 768 | 32.5 | 77.2 | 0.0 | 40.5 |
| 118 | 1135.6 | 69.6 | 1.3 | 110.2 | 864 | 31.0 | 76.9 | 0.0 | 43.1 |
| 119 | 1135.6 | 69.4 | 1.9 | 109.8 | 864 | 31.6 | 77.2 | 0.0 | 42.5 |
